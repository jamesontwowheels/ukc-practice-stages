<html>
<head>
  <title>AR.js Tappable Pumpkin</title>
  <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
  <script src="https://raw.githack.com/AR-js-org/AR.js/3.4.7/aframe/build/aframe-ar.js"></script>
  <style>
    body { margin: 0; background: #000; }
  </style>
</head>

<body>
  <a-scene
    embedded
    vr-mode-ui="enabled: false"
    arjs="sourceType: webcam; debugUIEnabled: false"
    renderer="antialias: true; alpha: true"
  >
    <!-- GPS Camera with cursor for touch/click detection -->
    <a-camera gps-new-camera="gpsMinDistance: 5">
      <a-cursor
        id="tapCursor"
        fuse="false"
        raycaster="objects: .clickable"
        material="color: white; shader: flat"
      ></a-cursor>
    </a-camera>

    <!-- Clickable pumpkin -->
    <a-entity
      id="pumpkin"
      class="clickable"
      gps-new-entity-place="latitude: 51.336261; longitude: -0.271021"
      rotation="0 180 0"
      scale="0.1 0.1 0.1"
    >
      <!-- Pumpkin model -->
      <a-entity
        gltf-model="./models/pumpkin.glb"
        position="0 0 0"
        scale="1 1 1"
      ></a-entity>

      <!-- "G" decal on pumpkin -->
      <a-entity
        geometry="primitive: plane; height: 0.6; width: 0.6"
        material="color: #ff6600; shader: flat; transparent: true; opacity: 0.8"
        text="value: G; color: white; align: center; width: 4; anchor: center"
        position="0 1.2 1"
        rotation="0 0 0"
        scale="1 1 1"
      ></a-entity>
    </a-entity>
  </a-scene>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const pumpkin = document.querySelector('#pumpkin');

      pumpkin.addEventListener('click', () => {
        // Animate shrinking
        pumpkin.setAttribute('animation', {
          property: 'scale',
          to: '0 0 0',
          dur: 500,
          easing: 'easeInOutQuad'
        });

        // Hide after animation
        setTimeout(() => {
          pumpkin.setAttribute('visible', 'false');
        }, 500);

        console.log('Pumpkin tapped!');
      });
    });
  </script>
</body>
</html>
